<!DOCTYPE html>
<meta charset="utf-8">
<html lang="ja">

<head>
  <title>test</title>
  <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
  <script src="/calcNum.js"></script>
  <script src="/check.js"></script>
</head>

<body>
  <select id="calcType">
  </select>
  <input type="button" class="calcButton" value="計算">
  </br>
  <div id="result"></div>
</body>

<script type="text/javascript">
  $(function() {

    var _nums = [],
      _defaultForm = 2,
      _form = _defaultForm,
      _calcType = 0,
      _calcTypeArray = ["足し算", "引き算", "掛け算", "割り算"];

    init();

    function init() {
      for (var i = 0; i < _calcTypeArray.length; i++) {
        $("#calcType").append($("<option>").text(_calcTypeArray[i]));
      }

      $("#calcType").on("change", function() {

        _calcType = $("#calcType").prop('selectedIndex');
        console.log(_calcType);
      });

      for (var i = _form - 1; i >= 0; i--) {
        $("body").prepend($('<input />').attr({
          'type': 'text',
          'id': 'num' + i,
          'value': ''
        }));
      }

      $('.calcButton').on('click', function() {
        _nums = [];
        for (var i = 0; i < _form; i++) {
          _nums.push($('#num' + i).val());
        }

        var isError = true;
        var out = "";

        if (checkEmpty(_nums)) {
          out = "<font color=\"#ff0000\">何も入力されていません。数値を入力してください。</font>";
        } else if (checkNumeric(_nums)) {
          out = "<font color=\"#ff0000\">入力されたのは数値ではありません。数値を入力してください。</font>";
        } else {
          isError = false;
        }

        if (!isError) {
          switch (_calcType) {
            case 0:
              out = _calcAddiction(_nums);
              break;
            case 1:
              out = _calcSubtraction(_nums);
              break;
            case 2:
              out = _calcMultiplication(_nums);
              break;
            case 3:
              out = _calcDivision(_nums);
              break;
            default:
          }
        }
        $('#result').prepend(out + "</br>");
      });
    }
  });

</script>

</html>
